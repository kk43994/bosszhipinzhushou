# 🔍 F12调试信息捕获功能 - 使用指南

> **新功能 (2025-11-04)**: 实时捕获浏览器F12面板的所有调试信息，让你轻松把报错和日志分享给开发者！

---

## 📌 功能概述

这个功能会**自动捕获**浏览器F12控制台的所有信息：
- ✅ 所有console输出 (log/error/warn/info/debug)
- ✅ 所有JavaScript错误和堆栈信息
- ✅ 所有未处理的Promise rejection
- ✅ 所有网络请求错误 (fetch/XHR)
- ✅ 所有资源加载错误 (图片/脚本/样式)

你不需要打开F12，插件会自动帮你记录一切！

---

## 🎯 为什么需要这个功能？

### 遇到Bug时的传统流程
1. 发现插件出错 ❌
2. 打开F12控制台 🤔
3. 找不到错误信息（已经滚过去了）😰
4. 无法提供详细信息给开发者 😭

### 使用F12捕获面板
1. 发现插件出错 ❌
2. 点击右下角"F12调试信息捕获"面板 🔍
3. 点击"导出完整信息"按钮 📤
4. 自动下载txt文件 + 复制到剪贴板 ✅
5. 直接发送给开发者 🎉

---

## 🚀 快速开始

### 1. 查看捕获面板

当你打开Boss直聘网站后，会在**右下角**自动出现一个粉色的悬浮面板：

```
┌─────────────────────────────────┐
│ 🔍 F12调试信息捕获     [0]       │
├─────────────────────────────────┤
│  🚨 错误: 0   ⚠️ 警告: 0         │
│  ℹ️ 信息: 0   📝 日志: 0         │
├─────────────────────────────────┤
│  [全部] [❌错误] [⚠️警告] ...    │
├─────────────────────────────────┤
│  [🗑️清空] [⏸️暂停] [📤导出]     │
├─────────────────────────────────┤
│  实时日志显示区域...             │
└─────────────────────────────────┘
```

### 2. 查看实时日志

面板会实时显示所有捕获的信息：

#### 日志显示格式
```
┌─────────────────────────────────────────┐
│ ERROR | 14:32:05.123 | window.onerror   │
├─────────────────────────────────────────┤
│ 消息: Uncaught TypeError: xxx           │
│ 文件: content.js:245:10                  │
│ 堆栈:                                    │
│   at function1 (content.js:245:10)      │
│   at function2 (content.js:123:5)       │
└─────────────────────────────────────────┘
```

### 3. 过滤日志

点击过滤按钮查看特定类型的日志：
- **全部** - 显示所有日志
- **❌ 错误** - 只显示错误
- **⚠️ 警告** - 只显示警告
- **ℹ️ 信息** - 只显示信息
- **📝 日志** - 只显示普通日志
- **🐛 调试** - 只显示调试日志

### 4. 导出调试信息

**当遇到问题时，点击"📤 导出完整信息"按钮**：

#### 导出内容包括：
1. **📊 基本信息**
   - 导出时间
   - 页面URL
   - 浏览器信息
   - 插件版本

2. **📈 统计信息**
   - 总日志数
   - 错误/警告/信息数量

3. **🚨 最近10个错误**
   - 错误消息
   - 完整堆栈信息
   - 文件位置

4. **📝 完整日志**
   - 按时间倒序排列
   - 包含所有捕获的信息

5. **📦 JSON格式数据**
   - 结构化数据
   - 方便程序化处理

#### 导出后会自动：
- ✅ 下载txt文件到本地
- ✅ 复制内容到剪贴板
- ✅ 显示成功提示

---

## 🎛️ 面板功能说明

### 统计卡片

面板顶部显示实时统计：

| 卡片 | 说明 |
|------|------|
| 🚨 错误 | JavaScript错误数量 |
| ⚠️ 警告 | 警告数量 |
| ℹ️ 信息 | 信息数量 |
| 📝 日志 | 普通日志数量 |

### 工具按钮

| 按钮 | 功能 | 说明 |
|------|------|------|
| 🗑️ 清空 | 清空所有日志 | 点击后会要求确认 |
| ⏸️ 暂停 | 暂停/继续捕获 | 暂停后不再记录新日志 |
| 📜 自动滚动 | 开关自动滚动 | 关闭后不会自动滚动到最新日志 |
| 📤 导出完整信息 | 导出所有信息 | 主要功能按钮 |

### 面板控制

| 按钮 | 功能 |
|------|------|
| − | 最小化面板 |
| × | 关闭面板 |
| 拖动标题栏 | 移动面板位置 |

---

## 📋 使用场景

### 场景1: 发现功能不工作

```
1. 打开F12捕获面板
2. 点击过滤器 -> "❌ 错误"
3. 查看是否有红色错误信息
4. 点击"导出完整信息"
5. 把导出的文件发送给开发者
```

### 场景2: 反馈性能问题

```
1. 使用插件一段时间
2. 打开F12捕获面板
3. 查看统计卡片（是否有大量错误/警告）
4. 点击"导出完整信息"
5. 发送给开发者进行分析
```

### 场景3: 定期检查

```
1. 每次使用插件时，看一眼右下角面板
2. 如果"🚨 错误"数字不是0，说明有问题
3. 导出信息反馈给开发者
```

---

## 📤 如何发送调试信息给开发者

### 方式1: 发送文件（推荐）

1. 点击"导出完整信息"
2. 找到下载的txt文件（文件名类似：`boss-debug-1730702345678.txt`）
3. 通过邮件/微信/GitHub Issue 发送这个文件

### 方式2: 复制粘贴

1. 点击"导出完整信息"
2. 会自动复制到剪贴板
3. 直接粘贴（Ctrl+V）到聊天窗口或Issue中

### 方式3: 截图（不推荐）

1. 对F12捕获面板截图
2. 发送截图

**注意**: 截图无法包含完整的错误堆栈信息，不推荐使用。

---

## 🔧 高级功能

### 手动访问监控器

你可以在浏览器F12控制台中手动访问监控器：

```javascript
// 获取所有日志
window.f12CapturePanel.consoleMonitor.getLogs()

// 过滤错误
window.f12CapturePanel.consoleMonitor.filterLogs({ type: 'error' })

// 获取统计信息
window.f12CapturePanel.consoleMonitor.getStats()

// 导出为JSON
window.f12CapturePanel.consoleMonitor.exportAsJSON()

// 暂停捕获
window.f12CapturePanel.consoleMonitor.pause()

// 恢复捕获
window.f12CapturePanel.consoleMonitor.resume()

// 清空日志
window.f12CapturePanel.consoleMonitor.clearLogs()
```

### 监听捕获事件

```javascript
// 监听新的日志捕获
window.addEventListener('bossConsoleCapture', (event) => {
  console.log('捕获了新日志:', event.detail);
});
```

---

## 🎨 UI说明

### 颜色编码

不同类型的日志使用不同的颜色：

| 类型 | 背景色 | 边框色 | 说明 |
|------|--------|--------|------|
| 🚨 错误 | 淡红色 | 红色 | JavaScript错误 |
| ⚠️ 警告 | 淡黄色 | 黄色 | 警告信息 |
| ℹ️ 信息 | 淡蓝色 | 蓝色 | 提示信息 |
| 📝 日志 | 淡绿色 | 绿色 | 普通日志 |
| 🤖 系统 | 灰色 | 灰色 | 系统消息 |

### 动画效果

- 新日志出现时会有滑入动画
- 鼠标悬停时会有高亮效果
- 统计卡片悬停时会上浮

---

## 📊 捕获的信息类型

### 1. Console输出

```javascript
console.log('普通日志')        // ✅ 捕获
console.error('错误信息')      // ✅ 捕获
console.warn('警告信息')       // ✅ 捕获
console.info('提示信息')       // ✅ 捕获
console.debug('调试信息')      // ✅ 捕获
```

### 2. JavaScript错误

```javascript
// 未捕获的错误
throw new Error('出错了')     // ✅ 捕获

// 未处理的Promise rejection
Promise.reject('失败了')      // ✅ 捕获
```

### 3. 网络请求错误

```javascript
// Fetch请求失败
fetch('/api/xxx')             // ✅ 捕获失败响应

// XHR请求失败
const xhr = new XMLHttpRequest()
xhr.open('GET', '/api/xxx')
xhr.send()                     // ✅ 捕获失败响应
```

### 4. 资源加载错误

```html
<!-- 图片加载失败 -->
<img src="not-exist.jpg">     <!-- ✅ 捕获 -->

<!-- 脚本加载失败 -->
<script src="not-exist.js"></script>  <!-- ✅ 捕获 -->
```

---

## ⚙️ 性能说明

### 性能影响

F12捕获功能对性能的影响非常小：

| 指标 | 影响 |
|------|------|
| 内存占用 | ~2MB (保存最多500条日志) |
| CPU占用 | 可忽略 (只在有日志时处理) |
| 网络影响 | 无 (不发送任何数据到服务器) |
| 页面加载 | 无影响 (异步初始化) |

### 数据保存

- 最多保存 **500条** 日志（超过会自动删除旧的）
- 所有数据存储在**内存**中（不占用磁盘）
- 刷新页面后数据会清空
- 不会上传到任何服务器

---

## 🔒 隐私说明

### 数据安全

- ✅ 所有数据都在本地处理
- ✅ 不会发送到任何远程服务器
- ✅ 导出的文件保存在你的电脑上
- ✅ 你完全控制何时分享这些信息

### 敏感信息

导出的文件可能包含：
- 你访问的Boss直聘页面URL
- 你的浏览器信息
- 插件运行产生的日志

**建议**: 导出后检查一下内容，确保没有你不想分享的敏感信息。

---

## ❓ 常见问题

### Q1: 面板没有出现？

**A**: 检查以下几点：
1. 确认插件已安装并启用
2. 刷新Boss直聘页面（Ctrl+Shift+R）
3. 打开浏览器F12控制台，看是否有错误
4. 检查是否被其他元素遮挡（试着拖动页面）

### Q2: 日志显示空白？

**A**: 这是正常的！只有当有console输出或错误时，才会显示日志。
- 试着点击插件的其他功能，会产生日志
- 或者在F12控制台输入 `console.log('测试')`

### Q3: 导出按钮没反应？

**A**:
1. 检查浏览器是否禁止了下载
2. 查看浏览器右上角是否有下载提示
3. 尝试右键点击"导出"按钮
4. 打开F12控制台查看是否有错误

### Q4: 面板太占位置怎么办？

**A**:
1. 点击 "−" 最小化面板
2. 拖动标题栏移动到其他位置
3. 点击 "×" 临时关闭（刷新页面会重新出现）

### Q5: 捕获的日志太多，性能受影响？

**A**:
1. 点击 "🗑️ 清空" 清除历史日志
2. 点击 "⏸️ 暂停" 暂停捕获
3. 插件会自动限制最多500条日志

### Q6: 可以只在出错时才显示面板吗？

**A**: 当前版本是自动显示的，但你可以：
1. 最小化面板（只显示一个标题栏）
2. 关注右上角的数字（有错误时会变红）
3. 需要时再展开查看

---

## 📝 导出文件示例

导出的txt文件内容示例：

```
================================================================================
Boss直聘智能助手 - 完整调试信息导出
================================================================================

📊 基本信息
--------------------------------------------------------------------------------
导出时间: 2025-11-04 14:32:15
页面URL: https://www.zhipin.com/web/geek/chat
User-Agent: Mozilla/5.0 ...
浏览器: Netscape 5.0
插件版本: 1.0.0

📈 统计信息
--------------------------------------------------------------------------------
总日志数: 45
错误: 2
警告: 5
信息: 20
普通日志: 18

🚨 最近10个错误
--------------------------------------------------------------------------------

[错误 1] 14:30:45.123
消息: Uncaught TypeError: Cannot read property 'textContent' of null
位置: content.js:245:10
堆栈:
  at CandidateExtractor.extractFromChatList (content.js:245:10)
  at CandidateExtractor.smartExtract (content.js:180:22)
  ...

[错误 2] 14:28:32.456
消息: 网络请求失败: 429 Too Many Requests
位置: analyzer.js:150:15
...

📝 完整日志 (按时间倒序)
--------------------------------------------------------------------------------
[1] 14:32:10.123 [LOG] [console]
  参数1: ✅ 半自动回复助手已启动
--------------------------------------------------

[2] 14:32:08.456 [INFO] [system]
  参数1: 开始初始化...
--------------------------------------------------

... (更多日志) ...

📦 JSON格式数据
--------------------------------------------------------------------------------
{
  "exportTime": "2025-11-04T06:32:15.123Z",
  "pageUrl": "https://www.zhipin.com/web/geek/chat",
  "userAgent": "Mozilla/5.0 ...",
  "totalLogs": 45,
  "logs": [
    {
      "id": "1730702330123-abc123",
      "timestamp": 1730702330123,
      "time": "14:32:10.123",
      "type": "log",
      "source": "console",
      "args": ["✅ 半自动回复助手已启动"],
      "url": "https://www.zhipin.com/web/geek/chat"
    },
    ...
  ]
}

================================================================================
导出完成
================================================================================
```

---

## 🎓 开发者信息

### 模块说明

- **console-monitor.js** - Console监控核心模块
- **f12-capture-panel.js** - UI面板模块

### API接口

详见代码注释和上文"高级功能"章节。

---

## 📮 反馈与建议

如果你对F12捕获功能有任何建议或发现问题，请：

1. 导出完整调试信息
2. 在GitHub创建Issue，附上导出的文件
3. 或通过其他方式联系开发者

---

## 🎉 总结

F12调试信息捕获功能让调试变得更简单：

✅ **自动捕获** - 不需要手动打开F12
✅ **完整信息** - 错误、日志、堆栈一网打尽
✅ **一键导出** - 3秒完成导出和分享
✅ **零学习成本** - 界面直观，操作简单
✅ **隐私安全** - 数据完全本地处理

**记住**: 遇到任何问题，先点"📤 导出完整信息"，然后发送给开发者！

---

**文档版本**: 1.0.0
**更新时间**: 2025-11-04
**适用版本**: Boss直聘智能助手 v1.0.0+
